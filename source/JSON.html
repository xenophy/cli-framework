<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/* vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4: */

/*!
 * This file is part of CLI Framework
 */

(function() {

    &quot;use strict&quot;;

    // {{{ CLI.JSON

<span id='CLI-JSON'>    /**
</span>     * Modified version of [Douglas Crockford&#39;s JSON.js][dc] that doesn&#39;t
     * mess with the Object prototype.
     *
     * [dc]: http://www.json.org/js.html
     *
     * @class CLI.JSON
     * @singleton
     */
    CLI.JSON = (new(function() {

        var me = this;

        // {{{ encode

<span id='CLI-JSON-method-encode'>        /**
</span>         * Encodes an Object, Array or other value.
         *
         * @param {Object} o The variable to encode.
         * @return {String} The JSON string.
         */
        me.encode = function(o) {
            return JSON.stringify(o);
        };

        // }}}
        // {{{ decode

<span id='CLI-JSON-method-decode'>        /**
</span>         * Decodes (parses) a JSON string to an object. If the JSON is invalid, this function throws
         * a SyntaxError unless the safe option is set.
         *
         * @param {String} json The JSON string.
         * @param {Boolean} [safe=false] `true` to return null, otherwise throw an exception
         * if the JSON is invalid.
         * @return {Object} The resulting object.
         */
        me.decode = function(json, safe) {

            try {
                return JSON.parse(json);
            } catch (e) {

                if (safe) {
                    return null;
                }

                CLI.Error.raise({
                    sourceClass: &quot;CLI.JSON&quot;,
                    sourceMethod: &quot;decode&quot;,
                    msg: &quot;You&#39;re trying to decode an invalid JSON String: &quot; + json
                });
            }

        };

        // }}}

        if (!CLI.util) {
            CLI.util = {};
        }

        // {{{ CLI.util.JSON

        CLI.util.JSON = me;

        // }}}
        // {{{ CLI.encode

<span id='CLI-method-encode'>        /**
</span>         * Shorthand for {@link CLI.JSON#encode}
         * @member CLI
         * @method encode
         * @inheritdoc CLI.JSON#encode
         */
        CLI.encode = me.encode;

        // }}}
        // {{{ CLI.decode

<span id='CLI-method-decode'>        /**
</span>         * Shorthand for {@link CLI.JSON#decode}
         * @member CLI
         * @method decode
         * @inheritdoc CLI.JSON#decode
         */
        CLI.decode = me.decode;

        // }}}

    })());

    // }}}

})();

/*
 * Local variables:
 * tab-width: 4
 * c-basic-offset: 4
 * c-hanging-comment-ender-p: nil
 * End:
 */
</pre>
</body>
</html>
